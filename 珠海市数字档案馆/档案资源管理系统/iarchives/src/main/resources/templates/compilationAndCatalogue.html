<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Cache-Control" content="no-cache">
<meta http-equiv="Expires" content="0">
<head>
    <meta charset="UTF-8">
    <title></title>
    <link rel="Shortcut Icon" href="img/icon/title.jpg"/>
    <link rel="stylesheet" href="js/layui/css/layui.css"/>
    <link rel="stylesheet" th:href="@{js/zui/css/zui.min.css}" />
    <!--<script type="text/javascript" src="js/myfocus/myfocus-2.0.4.min.js"></script>-->
    <style>
        html, body {
            width: 100%;
            height: 100%;
            margin: 0px;
            padding: 0px;
            overflow: hidden;
            background:#ededed;
        }

        .topBar {
            z-index: 10;
            width: 100%;
            height: 80px;
            min-width: 1000px;
            top: 0px;
            left: 0px;
            margin: auto;
            background: -webkit-linear-gradient(#fff, #f0f0f0); /* Safari 5.1 - 6.0 */
            background: -o-linear-gradient(#fff, #f0f0f0); /* Opera 11.1 - 12.0 */
            background: -moz-linear-gradient(#fff, #f0f0f0); /* Firefox 3.6 - 15 */
            background: linear-gradient(#fff, #f0f0f0); /* 标准的语法 */
        }

        .homePanel {
            width: 100%;
            height: 100%;
        }

        .logoDiv {
            float: left;
            margin-top: -5px;
            margin-left: 60px;
            height: 80px;
            line-height: 80px;
        }

        .logoDiv img{
            width:418px;
            height:54px;
        }

        .gnUl, .userDiv ul {
            margin: 0px;
            padding: 0 0 0 0;
        }

        .gnUl span {
            list-style: none;
            height: 100%;
            line-height:45px;
            border-radius: 3px;
            color: #fff;
            font-size: 1.2em;
            font-family: 雅黑;
            transition: all .2s;
        }

        .gnUl li:hover {
            background: #54aaec;
        }

        .gnUl li:active {
            background: rgba(237, 242, 252, 0.7);
        }

        .zw{
            height:80px;
        }

        @media screen and (min-width:1024px)and (max-width: 1860px)  {

            .logoDiv{
                margin-left: 25px;
                margin-top: -10px;
            }

            .logoDiv img{
                /*height: 30px;*/
            }

            .gnUl li {
                line-height: 45px;
                font-size: .9em !important;
            }

            .realname{
                min-width: 120px;
                max-width: 140px;
                display: inline-block;
                overflow: hidden;
                text-overflow: ellipsis;
                white-space: nowrap;
            }

            .qhli{
                width: 150px;
            }

            .realname,.qhli{
                font-size: .9em !important;
            }

            .userDiv ul li{
                height: 60px !important;
            }

            .userDiv ul li:not(:last-child){
                line-height: 60px !important;
            }

            .iselecttext span,.idbselecttext span{
                top:-10px !important;
            }

            #ptselect .iselecttext span,.idbselecttext span{
                top:5px !important;
            }

            .topBar{
                height:60px;
            }

            .zw{
                height:60px;
            }

            .msgText {
                width: 100% !important;
            }

            .themaDiv{
                width: 350px !important;
                height: 440px !important;
            }

            .openDaDiv,.jyDiv,.msgDiv{
                width: 250px !important;
                height: 440px !important;
            }

            .layui-table-view{
                height: 390px !important;
            }

            .layui-table-body{
                height: 350px !important;
            }

            .mk{
                left:-30px !important;
            }

        }

        @media screen and (max-width:1600px){
            .themaDiv{
                width: 400px !important;
            }
            .openDaDiv,.jyDiv,.msgDiv{
                width: 300px !important;
            }
        }

        @media screen and (max-width:1366px){
            .tpDiv {
                padding-top: 0px !important;
            }

            .themaDiv{
                width: 350px !important;
                height: 440px !important;
            }

            .openDaDiv,.jyDiv,.msgDiv{
                width: 250px !important;
                height: 440px !important;
            }

            .layui-table-view{
                height: 390px !important;
            }

            .layui-table-body{
                height: 350px !important;
            }

            .mk{
                left:-30px !important;
            }

        }

        @media screen and (max-width:1280px){

            .themaDiv{
                width: 350px !important;
                height: 440px !important;
            }

            .openDaDiv,.jyDiv,.msgDiv{
                width: 250px !important;
                height: 440px !important;
            }

            .layui-table-view{
                height: 390px !important;
            }

            .layui-table-body{
                height: 350px !important;
            }

            .tpDiv {
                padding-top: 0px !important;
            }
        }

        @media screen and (max-width:1024px){

            .logoDiv{
                margin-left: 10px;
            }

            .userDiv{
                margin-right: 0px !important;
            }

            .userDiv ul{
                padding-left: 0px;
            }

            .userDiv ul li{
                padding-left:0px !important;
                padding-right: 5px !important;
            }

            .qhli{
                width:100px;
                padding: 0px !important;
            }

            .realname{
                font-size: 13px !important;
            }

            .themaDiv{
                width: 300px !important;
                height: 420px !important;
            }

            .openDaDiv,.jyDiv,.msgDiv{
                width: 200px !important;
                height: 420px !important;
            }

            .layui-table-view{
                height: 370px !important;
            }

            .layui-table-body{
                height: 330px !important;
            }

            .mk{
                left:-20px !important;
            }

            .tpDiv {
                padding-top: 0px !important;
            }
        }

        @keyframes showIn {
            from, to {
                animation-timing-function: ease;
            }

            from {
                opacity: 0;
                -webkit-transform: scale(.9);
            }

            to {
                -webkit-transform: scale(1);
            }
        }

        .showIn {
            animation-name: showIn;
            animation-duration: .5s;
            animation-fill-mode: both;
        }

        @keyframes showOut {
            from, to {
                animation-timing-function: ease;
            }

            from {
                opacity: 1;
            }

            to {
                opacity: 0;
            }
        }

        .showOut {
            animation-name: showOut;
            animation-duration: .5s;
            animation-fill-mode: both;
        }

        .gnDiv {
           /*left: 0px;*/
            position: absolute;
            background: #fff;
        }

        .tpDiv {
            display: -webkit-flex;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            height: 100%;
            padding-top: 3%;
            overflow-y: auto;
        }

        .focusDiv, .openDaDiv, .jyDiv, .msgDiv,.themaDiv {
            margin: 10px;
            margin-top: 80px;
            height: 550px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 10px 10px 4px 4px;
        }
        .themaDiv{
            width: 550px;
        }

        .focusDiv {
            width: 540px;
            height: 390px;
        }

        .openDaDiv {
            width: 370px;
        }

        .jyDiv {
            width: 370px;

        }

        .msgDiv {
            width: 370px;

        }

        a {
            text-decoration: none;
        }

        .iloading {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0px;
        }

        .imodal {
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.3);
            display: -webkit-flex;
            display: flex;
            justify-content: center;
        }

        .spinner {
            margin-top: 20%;
            width: 80px;
            height: 60px;
            text-align: center;
            font-size: 10px;
        }

        .spinner > div {
            background-color: #1E90FF;
            height: 100%;
            width: 6px;
            margin: 0px 2px;
            display: inline-block;

            -webkit-animation: stretchdelay 1.2s infinite ease-in-out;
            animation: stretchdelay 1.2s infinite ease-in-out;
        }

        .spinner .rect2 {
            -webkit-animation-delay: -1.1s;
            animation-delay: -1.1s;
        }

        .spinner .rect3 {
            -webkit-animation-delay: -1.0s;
            animation-delay: -1.0s;
        }

        .spinner .rect4 {
            -webkit-animation-delay: -0.9s;
            animation-delay: -0.9s;
        }

        .spinner .rect5 {
            -webkit-animation-delay: -0.8s;
            animation-delay: -0.8s;
        }

        @-webkit-keyframes stretchdelay {
            0%, 40%, 100% {
                -webkit-transform: scaleY(0.4)
            }
            20% {
                -webkit-transform: scaleY(1.0)
            }
        }

        @keyframes stretchdelay {
            0%, 40%, 100% {
                transform: scaleY(0.4);
                -webkit-transform: scaleY(0.4);
            }
            20% {
                transform: scaleY(1.0);
                -webkit-transform: scaleY(1.0);
            }
        }

        .userDiv {
            float: right;
            margin-right: 50px;
        }

        .userDiv ul li{
            position: relative;
            float: right;
            list-style: none;
            height: 80px;
            /*line-height: 80px;*/
            padding: 0 10px;
            color: #fff;
            font-size: 1.3em;
            font-family: 雅黑;
            transition: all .2s;
        }

        .userDiv ul li:last-child{
            width: 110px;
        }

        .userDiv ul li:not(:last-child){
            line-height: 80px;
        }

        .userImg {
            display: inline-block;
            width: 30px;
            height: 30px;
            margin-top: -3px;
            float: left;
        }

        .divTitle {
            position: relative;
            height: 50px;
            border-radius: 10px 10px 0px 0px;
            text-align: left;
            background: rgba(41,59,89,.7);
        }

        .divTitle span {
            display: inline-block;
            margin: 13px 0px 0px 10px;
            font-size:20px;
            color: #fff;
            font-family: 幼圆;
        }

        .divTitle a {
            position: absolute;
            right:10px;
            top:13px;
            font-size: 1.2em;
            color: #FFF;
            font-family: 幼圆;
        }

        .layui-table-view {
            margin: 0px;
        }

        .layui-table-view .layui-table {
            margin: 0px;
            width: 100%;
        }

        .userhoverdiv {
            display: none;
            width: 100px;
            height: 60px;
            position: absolute;
            z-index: 1000000001;
            background: #fff;
            top: 120px;
            right: 3%;
            -webkit-box-shadow: 0 0 5px rgba(0, 0, 0, .6);
            -moz-box-shadow: 0 0 5px rgba(0, 0, 0, .6);
            box-shadow: 0 0 5px rgba(0, 0, 0, .6);
        }

        .userhoverdiv ul {
            list-style-type: none;
            height: 100%;
            margin: 0;
            padding: 0px;
            text-align: center;
        }

        .userhoverdiv ul li {
            height: 50%;
            -webkit-box-shadow: 0 0 1px 1px #e2e2e2;
            -moz-box-shadow: 0 0 1px 1px #e2e2e2;
            box-shadow: 0 0 1px 1px #e2e2e2;
            transition: all 200ms ease;
            color: #8B6969;
            line-height: 30px;
        }

        .userhoverdiv ul li:hover {
            background: rgba(135, 206, 250, 0.5);
            cursor: pointer;
        }

        .realname:hover {
            cursor: pointer;
        }

        .moreA:hover {
            cursor: pointer;
        }

        .borrowMsg{
            position: absolute;
            z-index: 100000000;
            bottom: 0px;
            width:100%;
            height: 94%;
            background:rgba(0,0,0,.8);
            display: none;
        }

        .borrowMsgContent{
            position: relative;
            left:-5%;
            width:110%;
            padding-top: 3%;
            color: #fff;
            overflow-y: auto;
        }

        .msgText{
            width:70%;
            min-height:50px;
            margin: 0px auto;
            font-size: 20px;
            text-align: left;
        }

        .bottomBorder{
            width:100%;
            height: 1px;
            background: rgba(255,255,255,.5);
        }

        .msgText table{
            width:100%;
        }
        .msgText table tr td:nth-child(1),.msgText table tr td:nth-child(3){
            text-align: center;
            width:20%;
        }

        .msgText table tr td:nth-child(2){
            /*text-align: center;*/
        }
        .borrowli:hover{
            cursor: pointer;
        }

        .iselect{
            position: relative;
            top:0px;
            min-width:70px;
            min-height: 80px;
            display: none;
            /*left:150px;*/
            z-index: 10;
            border-radius:5px;
            background: #fff;
            -webkit-box-shadow:1px 1px 50px rgba(0,0,0,.3);
            -moz-box-shadow:1px 1px 50px rgba(0,0,0,.3);
            box-shadow:1px 1px 50px rgba(0,0,0,.3);
        }

        #ptselect{
            top:50px;
            width:250px;
        }

        .itriangle{
            width: 0;
            height: 0;
            top:-17px;/*首行三角*/
            left:30%;
            position: absolute;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-bottom: 17px solid #fff;
        }

        .iselecttext{
            /*width:100%;*/
            height: 40px;
            text-align: center;
            transition: all .2s ease;
            border-bottom: 1px solid rgba(0,0,0,.1);
        }

        .iselecttext:hover{
            background: rgba(0,0,0,.1);
            cursor: pointer;
        }

        .iselecttext span,.idbselecttext span{
            position: relative;
            top:-20px;
            color: #333333;
            font-size: 1.1em;
            /*line-height: 10px;*/
            /*padding: 0px 10px;*/
        }
        #ptselect .iselecttext span,.idbselecttext span{
            top:5px;
            font-size: 20px;
        }
        .test{
            /*background-color: black;*/
            /*background-color: rgba(0, 0, 0, 0.4);*/
            color: #fff;
            /*height: 40px;*/
            /*text-align: center;*/
            font-size: 18px;
        }

        .glpt{
            position: absolute;
            top:0;
            bottom: 0;
            left:0;
            right: 0;
            margin: auto;
            display: inline-block;
            text-align: center;
            width:96px;
            height: 33px;
            /*padding:5px;*/
            border-radius: 5px;
            color:#fff;
            font-size: 20px;
            background: -webkit-linear-gradient(#2a8f9b, #357ac1); /* Safari 5.1 - 6.0 */
            background: -o-linear-gradient(#2a8f9b, #357ac1); /* Opera 11.1 - 12.0 */
            background: -moz-linear-gradient(#2a8f9b, #357ac1); /* Firefox 3.6 - 15 */
            background: linear-gradient(#2a8f9b, #357ac1); /* 标准的语法 */
        }

        .glpt:hover {
            cursor: pointer;
            /*background: #fbb654;*/
        }

        .scale{
            position: absolute;
            width:30px;
            height:30px;
            left: 170px;
        }

        .scale:hover {
            cursor: pointer;
        }

        .fw-view{
            position: relative;
            margin: auto;
            width:100%;
            height: 100%;
            overflow: hidden;
        }

        .fw-img{
            position: relative;
            display: none;
            width:100%;
            height: 100%;
            opacity: 1;
        }

        .fw-img>img{
            position:absolute;
            top:0;
            left:0;
            bottom:0;
            right:0;
            margin:auto;
            width:80%;
        }

        .fw-show{
            display:block;
            -webkit-animation: opacity-show .6s ease-in-out forwards;
            animation: opacity-show .6s ease-in-out forwards;
        }

        .fw-hide{
            display:none;
            -webkit-animation: opacity-hide .6s 1 ease-in-out;
            animation: opacity-hide .6s 1 ease-in-out;
        }

        .fw-lr_btn{
            position: absolute;
            top:35%;
            width:50px;
            height:50px;
            z-index:2;
            font-size: 30px;
        }

        ::selection{
            background: transparent;
        }

        .fw-lr_btn:hover{
            cursor: pointer;
        }

        .fw-right-btn{
            right:0;
            text-align: right;
        }

        @-webkit-keyframes opacity-show {
            0%{
                opacity: 0;
            }
            100% {
                opacity: 1;
            }
        }

        @-webkit-keyframes opacity-hide {
            0%{
                opacity: 1;
            }
            100% {
                opacity: 0;
            }
        }

        .hidden-text{
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .glmsg{
            position: absolute;
            top:-7px;
            right:-5px;
            display: none;
        }

        .bfmsg{
            position: absolute;
            top:15px;
            right:1px;
            display: none;
        }

        .stick-cls{
            float: right;
            display: inline-block;
            background: red;
            color:#fff;
            border-radius: 5px;
            margin-right:5px;
            padding: 2px;
        }
        .qhli1{
            display: none;
        }
        .left_main{
            /*width:12%;*/
            height: 600px;
            float: left;
        }
        .right_main{
            float: left;
        }
        .gnDiv{
            width:89%;
        }
        .left_main .menuDiv{
            height: 100%;
            background: -webkit-linear-gradient(#2a8f9b, #357ac1); /* Safari 5.1 - 6.0 */
            background: -o-linear-gradient(#2a8f9b, #357ac1); /* Opera 11.1 - 12.0 */
            background: -moz-linear-gradient(#2a8f9b, #357ac1); /* Firefox 3.6 - 15 */
            background: linear-gradient(#2a8f9b, #357ac1); /* 标准的语法 */
        }
        .menuDiv{
            text-align: left;
          /*  margin:0 auto;*/
        }
        .home_content{
            text-align: center;
            margin:0 auto;
            color:#ffffff;
            background: #357ac1;
        }
        .home_content>img{
            padding-top: 5px;
            width: 80px;
        }
        .home_content>div{
            font-size: 1.4em;
            margin: 0 0 0 0;
            padding-top: 10px;
            padding-bottom: 22px;
        }
        .home_content :hover{
            cursor: pointer;
        }
        .gnUl{
            margin-left: -10px;
        }
        .gnUl img{
            margin-right: 10px;
            margin-left: 20px;
            width: 32px;
            margin-bottom: 7px;
        }
        .logout,.manual:hover{
            cursor: pointer;
        }


        /*-------------------------------*/
        * {
            box-sizing: border-box !important;
        }

        div.container-fluid {}

        div.menuDiv {
            width: 200px;
            height: 100%;
            background: -webkit-linear-gradient(#2a8f9b, #357ac1); /* Safari 5.1 - 6.0 */
            background: -o-linear-gradient(#2a8f9b, #357ac1); /* Opera 11.1 - 12.0 */
            background: -moz-linear-gradient(#2a8f9b, #357ac1); /* Firefox 3.6 - 15 */
            background: linear-gradient(#2a8f9b, #357ac1); /* 标准的语法 */
        }

        div.menuDiv ul.nav li a {
            text-decoration: none;
            cursor: pointer;
            border-left-width: 3px;
            border-left-style: solid;
            border-left-color: rgba(60, 141, 188, 0);
        }

        div.menuDiv ul.nav li a:link,
        div.menuDiv ul.nav li a:visited,
        div.menuDiv ul.nav li a:active {
            background: rgba(1, 1, 1, 0);
            color: rgba(184, 199, 206, 1);
        }

        div.menuDiv ul.nav li a:hover {
            background: #54aaec;
            cursor: pointer;
            color: rgba(255, 255, 255, 1);
        }

        div.menuDiv ul.nav .icon-left {
            padding-right: 5px;
        }

        div.menuDiv ul.nav .icon-right {
            float: right;
            padding-top: 12px;
            padding-right: 10px;
        }

        div.menuDiv .nav-first {}

        div.menuDiv .nav-first>li {}

        div.menuDiv .nav-first>li>a {
            height: 40px;
            line-height: 40px;
            padding-top: 0;
            padding-right: 0;
            padding-bottom: 0;
            padding-left: 10px;
            margin: 0;
        }

        div.menuDiv .nav-first>li.active>a {
            background: rgba(30, 40, 44, 1) !important;
            color: rgba(255, 255, 255, 1) !important;
            border-left-color: rgba(60, 141, 188, 1);
        }

        div.menuDiv .nav-child {}

        div.menuDiv .nav-child>li {}

        div.menuDiv .nav-child>li>a {
            height: 30px;
            line-height: 30px;
            padding-top: 0;
            padding-right: 0;
            padding-bottom: 0;
            padding-left: 25px;
            margin: 0;
        }

        div.menuDiv .nav-child>li.borderLeft>a {
            border-left-color: rgba(60, 141, 188, 0.6);
        }

        div.menuDiv .nav-child>li.active>a {
            background: rgba(30, 40, 44, 1) !important;
            color: rgba(255, 255, 255, 1) !important;
            border-left-color: rgba(60, 141, 188, 0.6);
        }
    </style>
</head>
<body>
<span class="userhoverdiv"><ul><li>退出</li></ul></span>
<div class="left_main">
    <div class="container-fluid">
        <div class="row">
            <div class="menuDiv" role="navigation">
                <div id="scaleid" class="scale">
                    <img id="scaleImg" src="img/icon/shrink.png">
                </div>
                <div class="home_content">
                    <img src="img/icon/compilationhome.png">
                    <div id="sys_name"></div>
                </div>
                <ul class="gnUl nav nav-list nav-first">
                    <!--此外菜单列表动态生成-->
                </ul>

            </div>
        </div>
    </div>
</div>
<div class="right_main">
    <div class="topBar">
        <div class="userDiv">
            <ul>
                <li>
                    <img class="logout " src="img/icon/注销.png">
                </li>
                <li>
                    <img class="manual" src="img/icon/使用手册.png">
                </li>
               <!-- <li class="borrowli"><img  src="img/icon/消息.png">
                    <span class="layui-badge bfmsg">0</span>
                </li>-->
                <li>
                    <div class="userImg">
                        <img src="" style="border-radius: 50%;" class="imgsrc" width="30px" height="30px"/>
                    </div>
                    <span class="realname" style="min-width: 120px;display: inline-block;"></span>
                    <div class="iselect layui-anim layui-anim-upbit">
                        <div class="itriangle"></div>
                        <div class="iselecttext changepwd" ><span>修改密码</span></div>
                    </div>
                </li>
                <li class="qhli">
                    <span class="glpt">
                         切换平台
                        <span class="layui-badge glmsg">0</span>
                    </span>
                    &nbsp;&nbsp;&nbsp;
                </li>
            </ul>
        </div>
    </div>

    <div class="homePanel">
        <!--工作区域-->
    </div>
    <div class="borrowMsg layui-anim layui-anim-up">
        <center>
            <div class="borrowMsgContent">

            </div>
        </center>
    </div>
</div>

</body>
<script type="text/javascript" th:src="@{js/jquery/jquery-1.11.1.js}" ></script>
<script type="text/javascript" th:src="@{js/jquery/jquery.json.min.js}" ></script>
<script th:inline="javascript">
    var isLy = [[${isLy}]];
    var realname = [[${realname}]];
    var personalized = [[${personalized}]];
    var personalizeds = JSON.parse(personalized);
    var userid = [[${userid}]];
    var imgsrc = [[${imgsrc}]];
    var usertype = [[${usertype}]];
    var platformopen=[[${platformopen}]];
    var loginname=[[${loginname}]];
    var functions=[[${functions}]];
    var sysType = [[${sysType}]];
    var systemLoginType = [[${systemLoginType}]];
    if (sysType == "5"){
        if(systemLoginType=='0'){
            document.title = '数字档案馆（目录中心系统）';
            $('#sys_name').text('目录中心系统');
            $('.home_content>img').attr('src','img/icon/catalogue.png');
        }else{
            document.title = '数字档案馆（数据共享平台）';
            $('#sys_name').text('数据共享平台');
            $('.home_content>img').attr('src','img/icon/数据共享logo.png');
        }
        $('#qh_jh1').hide();
    } else if(sysType == "7"){
        document.title = '数字档案馆（编研管理系统）';
        $('#sys_name').text('编研管理系统');
        $('#qh_jh3').hide();
    }else if(sysType == "14"){
        document.title = '数字档案馆（业务指导和工作监督系统）';
        $('#sys_name').text('业务指导和工作监督系统');
        $('.home_content>img').attr('src','img/icon/业务指导和工作监督系统logo.png');
        $('#qh_jh3').hide();
    }else if(sysType == "12"){
        document.title = '数字档案馆（电子档案元数据登记）';
        $('#sys_name').text('电子档案元数据登记');
        $('.home_content>img').attr('src','img/icon/业务元数据维护.png');
        $('#qh_jh3').hide();
    }else if(sysType == "13"){
        document.title = '数字档案馆（安全离线数据交换系统）';
        $('#sys_name').text('安全离线数据交换系统');
        $('.home_content>img').attr('src','img/icon/数据共享logo.png');
        $('#qh_jh3').hide();
    }
</script>
<script type="text/javascript" th:src="@{sockjs/sockjs.min.js}" ></script>
<script type="text/javascript" th:src="@{sockjs/stomp.min.js}" ></script>
</html>
<script src="../js/layui/layui.js"></script>
<script>
    layui.use(['table', 'jquery', 'layer'], function () {
        var $ = layui.jquery
            , table = layui.table
            , layer = layui.layer;
        var thematictitle = [];
        var count =0;
        var navigationHeight = $(window).height()+'px';
        $('.menuDiv').css('height',navigationHeight);
        var width = $(window).width()-$('.left_main').width();
        $('.right_main').width(width);
        var pages = {}
        //动态生成功能菜单
        $.each(functions,function (index,item) {
            var li = '<li id="li'+item.name+'"><a href="#"><img src="img/icon/'+item.icon+'"><span class="icon-left glyphicon" aria-hidden="true"></span><span>'+item.name+'</span></a></li>';
            $('.nav').append(li);
            var pro = item.name;
            eval('pages.li'+ pro+'="'+ item.url +'"');
        })
        var homeContent = '<img class="content" src="img/icon/首页暂用图.png">';
        $('.homePanel').html(homeContent);
        var width = $(window).width()-$('.left_main').width();
        $('.content').width(width);
        $('.home_content').click(function () {
            $('.homePanel div').remove();
            $('.homePanel').html(homeContent);
            $('.menuDiv ul li').css({'border': '0px', 'background': ''});
        });
        if (!platformopen) {
            $(".msgDiv").hide();
        }
        $.ajax({
            type: 'POST',
            url: imgsrc,
            success: function(){
                $(".imgsrc").attr("src", imgsrc);
            },
            error:function(){
                $(".imgsrc").attr("src", "img/user_default.png");
            }
        });

        if (isLy == 'true') {
            layer.msg('对不起您没有登录管理平台的权限', {icon: 2});
        }
        $('.realname').text(realname+',欢迎您');
        $('.realname').css('color','#333');
//        myFocus.set({id: 'focusDiv', autoZoom: true});

        $('.nav li').click(function () {
            $('.borrowMsg').fadeOut(100);
            var url = pages[$(this).attr('id')];
            $('.gnDiv').removeClass('showIn').addClass('showOut').hide();
            $('.gnDiv iframe').css('z-index', '0');
            $('.menuDiv ul li').css({'border': '0px', 'background': ''});
            $(this).css({ 'background': '#1c5988'});
            if ($('#gnDiv' + $(this).attr('id')).attr('id')) {
                $('#gnDiv' + $(this).attr('id')).show().removeClass('showOut').addClass('showIn');
                $('#gnDiv' + $(this).attr('id') + ' iframe').css('z-index', '1');
                return;
            }

            var iloading = "<div class='iloading'><div class='imodal'><div class='spinner'><div class='rect1'></div><div class='rect2'></div>"
                + "<div class='rect3'></div><div class='rect4'></div><div class='rect5'></div></div></div></div>";
            var html = "<div id='gnDiv" + $(this).attr('id') + "' class='gnDiv anim showIn'>" + iloading + "<iframe  id='iframe" + $(this).attr('id') + "' src='" + url + "'  style='width:100%;border:0px;height:100%;z-index:1'></iframe></div>";
            $('.homePanel .content').remove();
            $('.homePanel').append(html);
            var width = $(window).width()-$('.left_main').width();
            $('.gnDiv').width(width);

            $('#iframe' + $(this).attr('id')).load(function () {
                $('.iloading').fadeOut(200);
                console.log($('#iframe' + $(this).attr('id')).contents().find('head').length);
                $($(this).contents().find('style')[0]).remove();
                var rgb = !personalizeds ? '34,139,230' : personalizeds.rgb;
                var ztsize = !personalizeds ? 'small' : personalizeds.ztsize;
                $($(this).contents().find('head')[0]).append(getExtStyle(rgb, ztsize));
            });

            panelSize();
        });

        function getExtStyle(rgb, ztsize) {
            var style = "<style>.x-panel-header-default,.x-window-header-default-top,.x-btn-default-small,.x-window-default," +
                ".x-tab-bar-default,.x-panel-default-framed,.x-tool-img,.x-panel-default-outer-border-rbl{background-color:rgba(" + rgb + ",0.7) !important;border-color:rgba(" + rgb + ",0.7) !important;}" +
                ".x-form-text,.x-tree-node-text ,.x-btn-icon-small-left,.x-btn-text,.x-btn-inner,.x-column-header-text-inner,.x-grid-td,.x-form-item-label-text,label,.x-window-text,.x-title-text-default{ font-size:" + ztsize + " !important;}" +
                ".x-autocontainer-innerCt,.x-toolbar-text,.x-component,.x-progress-text,.x-form-display-field,.x-tab-inner-default,.webuploader-pick{font-size:" + ztsize + " !important;}.x-btn-over,.x-boundlist-item-over,.x-menu-item-focus,.x-menu-item-active{background-color:rgba(" + rgb + ",0.6) !important;border-color:rgba(" + rgb + ",0.6)!important;}.x-boundlist-selected{background-color:rgba(" + rgb + ",0.8) !important;border-color:rgba(" + rgb + ",0.8) !important;}" +
                ".x-grid-item-focused{border-color:rgba(" + rgb + ",1) !important;border:1px solid rgba(" + rgb + ",1) !important;} .x-tree-view{overflow-x: auto !important;} .x-boundlist-item{font-size:"+ztsize+"}" +
                ".listlibg{background:(" + rgb + ",0.7)!important;} .webuploader-pick{padding:10px 5px !important;}"+
                "</style>";
            return style;
        }

        $('.moreA').click(function () {
            $('#' + $(this).attr('id').substring(1)).click();
        });

        /*$('.qhli').click(function () {
            location.href = "/index?sysType=1";
        });*/

        $('.qhli .iselecttext').click(function () {

            if($(this).attr('systype')){
                var ran=Math.random();
                var permiss=false;
                var url='/isPermiss?loginname='+loginname+'&logintype='+$(this).attr('systype')+'&t='+ran;
                $.ajax({
                    type: "post",
                    url: url,
                    async: false,
                    dataType: 'json',
                    success: function (data) {
                        permiss = data.success;
                    },
                    error: function () {
                        layer.msg('登录权限错误！', {icon: 5});
                    }
                });
                if (permiss) {
                    layer.msg('用户没有该平台权限');
                    return;
                }
                location.href = "/index?sysType="+$(this).attr('systype');
            }
        });

        /* $('.userDiv ul li:nth-child(2)').hover(function(){
             $('.iselect').fadeIn();
         },function(){
             $('.iselect').fadeOut(100);
         });*/

        $('.userDiv ul li').hover(function(){
            $(this).find('.iselect').fadeIn();
        },function(){
            $(this).find('.iselect').fadeOut(100);
        });

        $('.changepwd').click(function(){
            ifpanel1('用户信息', '/user/userMsg', '370px', '350px');
        });

        function ifpanel1(titl, url, x, y,top) {
            var index = layer.open({
                title: titl,
                type: 2,
                skin: 'layui-layer-lan',
                shade: 0,
                offset: top?top:'100px',
                content: url,
                zIndex: layer.zIndex,
                area: [x, y],
                shade: 0.3,
                resize: false,
                success: function (layero, index) {
                    if (layer.getChildFrame('.logotop').length > 0) {
                        setTimeout(function(){
                            location.href = "/index";
                        },500);
                    }
                }
            });

            setzts1();
            return index;
        }

        $('.logout').click(function () {
            $('.borrowMsg,.iselect').fadeOut(100);
            layer.confirm('确定退出？', {
                title: '提示',
                offset: '30%',
                zIndex: layer.zIndex,
                btn: ['确定', '取消'] //按钮
            }, function () {
                $.ajaxSettings.async = false;//同步
                location.href = "/logoutt";
            }, function () {
            });
        });

        $('.userhoverdiv').hover(function () {
        }, function () {
        });

        $('.userhoverdiv ul li').click(function () {
            location.href = "/logoutt";
        });

        function ifpanel1(titl, url, x, y,top) {
            var index = layer.open({
                title: titl,
                type: 2,
                skin: 'layui-layer-lan',
                shade: 0,
                offset: top?top:'100px',
                content: url,
                zIndex: layer.zIndex,
                area: [x, y],
                shade: 0.3,
                resize: false,
                end: function () {//layer.open关闭事件
                    $.ajax({
                        type: 'get',
                        url: '/indexly/getBorrowFinishMsgCount',
                        success: function(data){
                            if(data!=0){
                                $('.bfmsg').show().text(data);
                            }else {
                                $('.bfmsg').hide();
                            }
                        },
                        error:function(){
                            layer.msg('审批完结提醒加载失败...', {icon: 5});
                        }
                    });
                }
            });

            setzts1();
            return index;
        }

        function setzts1() {
            var zts = '#' + $('#zts').attr('zts');
            var rgb = $('#zts').attr('rgb');
            var ztsize = $("#zts").attr("ztsize");
            $('.layui-layer-title').css({
                color: '#fff',
                background: zts
            });

            $('#buttom').css({
                background: 'rgba(' + rgb + ',0.6)'
            });

            $('.menuleft,.box ul li ul').css({
                background:'linear-gradient(to left, rgba('+rgb+',0.4), rgba('+rgb+',0.9))'
            });

            $('.ititle').css({
                background: zts
            });
            $('.layui-layer-title').css({'font-size': ztsize});
        }

        $(window).resize(function () {
            panelSize();
        });

        function panelSize() {
            $('.homePanel').height($(window).height()-$('.topBar').height());
            $('.gnDiv').height($('.homePanel').height());
            $('.fw-view').height($('.fw-view').height()-$('.divTitle').height())
        }
        panelSize();

        /*$.ajax({
            type: 'get',
            url: '/indexly/getBorrowFinishMsgCount?number='+Math.random(),
            success: function(data){
                if(data!=0){
                    $('.bfmsg').show().text(data);
                }else {
                    $('.bfmsg').hide();
                }
            },
            error:function(){
                layer.msg('审批完结提醒加载失败...', {icon: 5});
            }
        });*/

/*        $('.borrowli').click(function(){
            var obj = $(window).height()-$('.topBar').height()+"px";
            ifpanel1('审批完结提醒', '/indexly/borrowly', '100%',obj,$('.topBar').height()+"px");
        });*/

        var socket = new SockJS("/websocket");
        stompClient = Stomp.over(socket);
        stompClient.connect({}, function(frame) {
            stompClient.subscribe('/message', function(respnose){
                getMsg();
                //getBorrowFinish();
            });
            stompClient.subscribe('/user/'+userid+'/message', function(respnose){
                getMsg();
                //getBorrowFinish();
            });
        });

        function getMsg(){
            var result,count = 0;
            $.ajax({
                type: "post",
                url: '/user/getmsg',
                dataType:'json',
                success: function (data) {
                    result = data;
                },
                error:function(){
                    layer.msg('通知加载失败...', {icon: 5});
                },
                async:false
            });
            for(var i=0;i<result.length;i++){
//                if(result[i].msgtype!='1'){
                count++;
//                }
            }

            if(count!=0){
                $('.glmsg').show().text(count);
            }
            return count;
        }
        getMsg();
/*        function getBorrowFinish(){
            $.ajax({
                type: 'get',
                url: '/indexly/getBorrowFinishMsgCount?number='+Math.random(),
                async:false,
                success: function(data){
                    if(data!=0){
                        $('.bfmsg').show().text(data);
                    }else {
                        $('.bfmsg').hide();
                    }
                },
                error:function(){
                    layer.msg('审批完结提醒加载失败...', {icon: 5});
                }
            });
        }*/
        $(".qhli").click(function(){
            $.ajax({
                type: "post",
                url: '/user/platformchange',
                data:{'userid':userid,
                    'changetype':"1"
                },
                success: function (result) {
                }
            });
        });

        $(".manual").click(function(){//不同手册的切换
            $.ajax({
                type: "post",
                url: '/getProductMsg',
                data:{},
                success: function (result) {
                    if(result.data[0]=="普通版"){//普通版没有利用平台

                    }
                    if(result.data[0]=="高级版"){
                        window.open('/doc/高级版/用户手册.pdf');
                    }
                    if(result.data[0]=="增强版"){
                        window.open('/doc/增强版/用户手册.pdf');
                    }
                }
            });
        });

    });

    $('.qhli').click(function () {
        location.href ="/indexswitch?sysType="+sysType;
    });
</script>

<!--以下是导航菜单左右伸缩js-->
<script>
    // 是否显示一级菜单折叠按钮
    var hsfoldIcon = true;
    // 需要控制隐藏/显示的span元素
    var hsSpanElement;

    /** 一级菜单绑定单击事件(折叠/展开二级菜单) */
    $('ul.nav-first>li>a').click(function(event) {
        // 实现菜单折叠
        $(this).next('ul').slideToggle();
        $(this).children('span.icon-right').toggleClass('glyphicon-chevron-up').toggleClass('glyphicon-chevron-down');
        hsSpanElement = hsfoldIcon ? 'ul.nav>li>a>span:not([class*="glyphicon "])' : 'ul.nav>li>a>span:not([class*="icon-left "])';
        $(hsSpanElement).each(function() {
            if (menuIsShow) {
                $(this).show();
            } else {
                $(this).hide();
            }
        });
    });
    $('ul.nav-first>li').click(function(event) {
        menuClick1(this);
    });
    $('ul.nav-first>li>ul.nav-child>li').click(function(event) {
        menuClick2(this);
    });

    /** 一级菜单绑定单击事件(触发样式和链接),obj是一级菜单li */
    function menuClick1(obj) {
        var objUl = $(obj).find('ul');
        var aHref = "/_xwq/content-wrapper/404.html ";
        if (objUl.html() == undefined || objUl.length <= 0) { // 无子菜单,触发单击事件
            // 去除所有二级菜单活动状态
            $('ul.nav-first>li>ul.nav-child>li').removeClass('borderLeft').removeClass('active');
            // 去除所有一级菜单活动状态
            $('ul.nav-first>li').removeClass('active');
            // 当前菜单(一级菜单)加上活动状态
            $(obj).addClass('active');
            // 获取a标签链接
            if (!($(obj).find('a').attr('aHref') == undefined || $(obj).find('a').attr('aHref') == '#' || $(obj).find('a').attr('aHref').trim() == '')) {
                aHref = $(obj).find('a').attr('aHref');
            }
            console.log("menuUrl: " + aHref);
            // $('.basepage_container_right_center').load(aHref);
        }
    }

    /** 二级菜单绑定单击事件(触发样式和链接),obj是二级菜单li */
    function menuClick2(obj) {
        var aHref = "/_xwq/content-wrapper/404.html ";
        // 去除所有二级菜单活动状态
        $('ul.nav-first>li>ul.nav-child>li').removeClass('borderLeft').removeClass('active');
        // 当前菜单及其同级菜单(二级菜单)加上状态
        $(obj).parent().children().each(function(i, v) {
            if ($(this).children('a').html() != $(obj).children('a').html()) {
                $(this).addClass('borderLeft');
            } else {
                $(this).addClass('active');
                return false;
            }
        });
        // 去除所有一级菜单活动状态
        $('ul.nav-first>li').removeClass('active');
        // 当前菜单的上级菜单(一级菜单)加上活动状态
        $(obj).parent().parent().addClass('active');
        // 获取a标签链接
        if (!($(obj).find('a').attr('aHref') == undefined || $(obj).find('a').attr('aHref') == '#' || $(obj).find('a').attr('aHref').trim() == '')) {
            aHref = $(obj).find('a').attr('aHref');
        }
        console.log("menuUrl: " + aHref);
        // $('.basepage_container_right_center').load(aHref);
    }

    var menuIsShow = true; // 菜单收缩标志
    var menuWidth; // 菜单宽度

    /**
     * 菜单收缩/展开
     * element 菜单所在容器宽度设置,例如'#menuDiv'
     */
    function menuPullback(element) {
        // 控制li>a>span隐藏状态
        hsSpanElement = hsfoldIcon ? 'ul.nav>li>a>span:not([class*="glyphicon "])' : 'ul.nav>li>a>span:not([class*="icon-left "])';
        $(hsSpanElement).each(function() {
            if ($(this).is(':hidden')) {
                $(this).show();
            } else {
                $(this).hide();
            }
        });
        // 判断menuIsShow的状态
        if (menuIsShow) {
            menuWidth = 50;
            $(element).width(menuWidth); // 设置宽度
            // 修改标志位
            menuIsShow = false;
        } else {
            menuWidth = 200;
            $(element).width(menuWidth); // 设置宽度
            menuIsShow = true;
        }
    }

    /**
     * 文字化菜单(菜单展开)
     * element 菜单所在容器宽度设置,例如'#menuDiv'
     */
    function menuExtend(element) {
        // 控制li>a>span隐藏状态
        hsSpanElement = hsfoldIcon ? 'ul.nav>li>a>span:not([class*="glyphicon "])' : 'ul.nav>li>a>span:not([class*="icon-left "])';
        $(hsSpanElement).each(function() {
            $(this).show();
        });
        // 判断menuIsShow的状态
        menuWidth = 200;
        $(element).width(menuWidth); // 设置宽度
        menuIsShow = true;
        var width = $(window).width()-$('.left_main').width();
        $('.right_main').width(width);
        $('.gnDiv').width(width);
        $('.content').width(width);
        document.getElementById('scaleid').style.left = '170px';
        document.getElementById('scaleImg').src = 'img/icon/shrink.png';  //切换为缩小按钮
    }

    /**
     * 图标化菜单(菜单收缩)
     * element 菜单所在容器宽度设置,例如'#menuDiv'
     */
    function menushrink(element) {
        // 控制li>a>span隐藏状态
        hsSpanElement = hsfoldIcon ? 'ul.nav>li>a>span:not([class*="glyphicon "])' : 'ul.nav>li>a>span:not([class*="icon-left "])';
        $(hsSpanElement).each(function() {
            $(this).hide();
        });
        // 判断menuIsShow的状态
        menuWidth = 50;
        $(element).width(menuWidth); // 设置宽度
        // 修改标志位
        menuIsShow = false;
        var width = $(window).width()-$('.left_main').width();
        $('.right_main').width(width);
        $('.gnDiv').width(width);
        $('.content').width(width);
        document.getElementById('scaleid').style.left = '20px';
        document.getElementById('scaleImg').src = 'img/icon/extend.png'; //切换为展开按钮
    }

//    $(function() {
//        hsfoldIcon = true;
//        var element = '.menuDiv';
//       //menuPullback(element); // 加载时默认收缩菜单
//        // 鼠标经过(展开菜单)
//        $(element).mouseover(function() {
//            menuExtend(element);
//        });
//        // 鼠标离开(收缩菜单)
//        $(element).mouseout(function() {
//            menushrink(element);
//        });
//    });

    $('.scale').click(function () {
        var element = '.menuDiv';
        if(menuIsShow){  //判断当前是否展开状态
            menushrink(element);
        }else{
            menuExtend(element);
        }
    });
</script>
<!--以上是导航菜单左右伸缩js-->